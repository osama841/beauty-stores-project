

/* ===== src/styles/header.css (REPLACE FILE) ===== */
/* Use Bootstrap variables defined in global.css */
:root{
  --text-color: var(--bs-body-color, #212529);
  --text-color-light:#6c757d;
  --background-color:#fff;
  --border-color:#f0f0f0;
  --header-height:70px;
}

/* Header */
.site-header{background:var(--background-color);box-shadow:0 2px 10px rgba(0,0,0,.05);height:var(--header-height);z-index:1000;position:sticky;top:0;inset-inline:0;width:100%}
.header-nav{height:100%;display:flex;justify-content:space-between;align-items:center}
.brand-logo{font-size:1.6rem;font-weight:700;color:var(--bs-dark);text-decoration:none}
.brand-logo:hover{color:var(--bs-primary)}

/* Right actions */
.header-actions{display:flex;align-items:center;gap:1.5rem}
.cart-icon{position:relative;color:var(--text-color)}
.cart-badge{position:absolute;top:-5px;right:-10px;background:var(--bs-primary);color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700}

/* Nav links */
.nav-links{list-style:none;margin:0;padding:0;display:flex;gap:2rem}
.nav-link{color:var(--text-color-light);text-decoration:none;font-weight:500;padding:5px 0;position:relative;transition:color .3s;display:flex;align-items:center;gap:4px}
.nav-link::after{content:"";position:absolute;bottom:0;left:0;width:0;height:2px;background:var(--bs-primary);transition:width .3s}
.nav-link:hover,.nav-link.active{color:var(--bs-primary)}
.nav-link:hover::after,.nav-link.active::after{width:100%}

/* Action buttons */
.btn-action-main,.btn-action-secondary,.btn-admin{padding:8px 16px;border-radius:20px;text-decoration:none;font-weight:500;transition:all .3s;display:flex;align-items:center;gap:8px;border:1px solid var(--bs-primary)}
.btn-action-main{background:var(--bs-primary);color:#fff}
.btn-action-main:hover{filter:brightness(.95)}
.btn-action-secondary{background:transparent;color:var(--bs-primary)}
.btn-action-secondary:hover{background:var(--bs-primary);color:#fff}
.btn-admin{background:var(--bs-dark);color:#fff;border:1px solid var(--bs-dark)}
.btn-admin:hover{background:#333}

/* User dropdown */
.nav-item-dropdown{position:relative}
.dropdown-content{display:none;position:absolute;top:100%;left:0;background:var(--background-color);min-width:200px;box-shadow:0 8px 16px rgba(0,0,0,.1);border-radius:8px;padding:10px 0;list-style:none;margin-top:10px;opacity:0;visibility:hidden;transform:translateY(10px);transition:all .3s;z-index:1001}
.nav-item-dropdown:hover>.dropdown-content{display:block;opacity:1;visibility:visible;transform:translateY(0)}
.user-dropdown .dropdown-content{left:auto;right:0}
.dropdown-content li a,.dropdown-content button{color:var(--text-color);padding:10px 20px;text-decoration:none;display:block;width:100%;text-align:right;background:none;border:none;cursor:pointer}
.dropdown-content li a:hover,.dropdown-content button:hover{background:#f7f7f7;color:var(--bs-primary)}
.dropdown-content hr{border:0;border-top:1px solid var(--border-color);margin:8px 0}

/* Categories bar */
.category-nav{position:sticky;top:var(--header-height);z-index:999;background:#fff}
.category-list{list-style:none;display:flex;gap:1.25rem;margin:0;padding:.5rem 0}
.category-item{position:relative}
.category-link{color:var(--text-color);text-decoration:none;font-weight:500}
.category-link:hover{color:var(--bs-primary)}

/* Mega menu (desktop) — fixed */
@media (min-width: 992px) {
  .category-nav { z-index: 1050; overflow: visible; }
  .site-header { overflow: visible; }

  .mega-menu {
    /* بدل display:none/block إلى إخفاء بصري ناعم */
    display: block;                  /* يبقى داخل التدفق لكن غير مرئي حتى الهوفر */
    opacity: 0;
    visibility: hidden;
    transform: translateY(8px);
    transition: opacity .15s ease, transform .15s ease, visibility 0s linear .15s;

    position: absolute;
    inset-block-start: 100%;
    /* ثبّت المحاذاة على يمين العنصر في RTL */
    inset-inline-start: auto;
    inset-inline-end: 0;

    min-width: 320px;
    max-width: min(92vw, 720px);
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 12px 24px rgba(0,0,0,.10);
    padding: 1rem;
    z-index: 1060;                   /* فوق كل شيء في الهيدر */
    pointer-events: none;            /* لا تتفاعل وهي مخفية */
  }

  .category-item:hover > .mega-menu,
  .category-item:focus-within > .mega-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(12px);
    transition-delay: 0s;
    pointer-events: auto;            /* تتفاعل عند الظهور */
  }
}


/* Mobile: show categories directly + slide-in nav-menu */
.menu-toggle,.close-menu-btn{display:none;background:none;border:none;cursor:pointer;color:var(--text-color)}
.nav-actions-mobile{display:none}

@media(max-width:991.98px){
  .site-header{height:auto}
  .menu-toggle{display:block}

  /* Use transform instead of right:-100% to avoid horizontal overflow */
  .nav-menu{position:fixed;top:0;right:0;width:300px;height:100%;background:var(--background-color);box-shadow:-4px 0 15px rgba(0,0,0,.1);display:flex;flex-direction:column;align-items:flex-start;padding:20px;transition:transform .35s ease-in-out;z-index:1002;overflow-y:auto;transform:translateX(100%)}
  .nav-menu.is-open{transform:translateX(0)}
  .close-menu-btn{display:block;margin-bottom:2rem}
  .nav-links{flex-direction:column;gap:1.5rem;width:100%}
  .nav-link::after{display:none}
  .nav-item-dropdown:hover>.dropdown-content{display:none}

  /* show these ONLY when menu is open */
  .nav-menu.is-open .nav-actions-mobile{display:flex;flex-direction:column;gap:1rem;margin-top:2rem;padding-top:2rem;border-top:1px solid var(--border-color);width:100%}

  /* categories list is visible with horizontal scroll */
  .category-list{gap:.75rem;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:thin;padding:.5rem .25rem}
  .category-item{flex:0 0 auto}
  .category-link{white-space:nowrap;display:inline-block;padding:.35rem .75rem;border-radius:999px;background:#f8f9fa;border:1px solid var(--border-color)}
  .mobile-children{display:none;padding:.5rem;margin-top:.25rem;border:1px solid var(--border-color);border-radius:.5rem;background:#fff;box-shadow:0 8px 16px rgba(0,0,0,.06)}
  .mobile-children.show{display:block}
  .mobile-children .mega-link{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .5rem;border-radius:.375rem;color:var(--text-color);text-decoration:none}
  .mobile-children .mega-link:hover{color:var(--bs-primary);text-decoration:underline}
}

/* Content spacing */
main,.page-content{padding-top:56px}
